<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Memory Game â¤ï¸</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(#ffe6f0,#fff);
  text-align:center;
}

h1{ color:#ff4d88; margin:20px 0 10px }

.grid{
  display:grid;
  grid-template-columns:repeat(4, 75px);
  gap:14px;
  justify-content:center;
  margin-top:20px;
}

/* CARD FLIP SYSTEM */
.card{
  width:75px;
  height:75px;
  perspective:600px;
  cursor:pointer;
}

.inner{
  width:100%;
  height:100%;
  border-radius:18px;
  transition:transform 0.6s;
  transform-style:preserve-3d;
  position:relative;
}

.card.flipped .inner,
.card.matched .inner{
  transform:rotateY(180deg);
}

.face{
  position:absolute;
  width:100%;
  height:100%;
  border-radius:18px;
  backface-visibility:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}

.front{
  background:#ff4d88;
  color:white;
  font-size:28px;
}

.back{
  background:white;
  transform:rotateY(180deg);
  background-size:cover;
  background-position:center;
}

.info{
  margin-top:10px;
  font-size:15px;
  color:#ff4d88;
}

button{
  margin:12px 6px;
  padding:8px 20px;
  border:none;
  border-radius:30px;
  background:#ff4d88;
  color:white;
  font-size:14px;
  cursor:pointer;
}

#playAgain{ display:none }
</style>
</head>

<body>

<h1>ğŸ’– Valentine Memory Match</h1>
<p>Match all the pictures to win â¤ï¸</p>

<div class="info">
  Flips: <span id="flips">0</span> |
  Best: <span id="best">--</span>
</div>

<div class="grid" id="grid"></div>

<p id="msg"></p>

<button id="playAgain">ğŸ”„ Play Again</button>
<button onclick="toggleMusic()" id="musicBtn">ğŸ”Š Music</button>
<button onclick="goBack()">â† Back</button>

<!-- ğŸµ MUSIC -->
<audio id="music1" src="music1.mp3"></audio>
<audio id="music2" src="music2.mp3"></audio>

<script>
const images = [
  "img1.jpg","img2.jpg","img3.jpg",
  "img4.jpg","img5.jpg","img6.jpg"
];

const grid = document.getElementById("grid");
const flipsEl = document.getElementById("flips");
const bestEl = document.getElementById("best");
const msg = document.getElementById("msg");
const playAgainBtn = document.getElementById("playAgain");
const musicBtn = document.getElementById("musicBtn");

const music1 = document.getElementById("music1");
const music2 = document.getElementById("music2");

let cards = [];
let first = null;
let lock = false;
let matchedPairs = 0;
let flips = 0;
let muted = false;

/* ğŸµ MUSIC SYSTEM */
music1.volume = music2.volume = 0.4;
music1.play();
music1.onended = () => music2.play();
music2.onended = () => music1.play();

function toggleMusic(){
  muted = !muted;
  music1.muted = music2.muted = muted;
  musicBtn.innerText = muted ? "ğŸ”‡ Muted" : "ğŸ”Š Music";
}

/* ğŸ’¾ BEST SCORE */
let bestScore = localStorage.getItem("bestScore");
if(bestScore) bestEl.innerText = bestScore;

function shuffle(arr){
  return arr.sort(() => Math.random() - 0.5);
}

function startGame(){
  grid.innerHTML = "";
  cards = shuffle([...images, ...images]);
  first = null;
  lock = false;
  matchedPairs = 0;
  flips = 0;
  flipsEl.innerText = flips;
  msg.innerText = "";
  playAgainBtn.style.display = "none";

  cards.forEach(img => {
    const card = document.createElement("div");
    card.className = "card";

    const inner = document.createElement("div");
    inner.className = "inner";

    const front = document.createElement("div");
    front.className = "face front";
    front.textContent = "?";

    const back = document.createElement("div");
    back.className = "face back";
    back.style.backgroundImage = `url(${img})`;

    inner.appendChild(front);
    inner.appendChild(back);
    card.appendChild(inner);

    card.dataset.img = img;
    card.onclick = () => flip(card);

    grid.appendChild(card);
  });
}

function flip(card){
  if(lock || card.classList.contains("flipped") || card.classList.contains("matched")) return;

  card.classList.add("flipped");
  flips++;
  flipsEl.innerText = flips;

  if(!first){
    first = card;
    return;
  }

  if(first.dataset.img === card.dataset.img){
    first.classList.add("matched");
    card.classList.add("matched");
    matchedPairs++;
    first = null;

    if(matchedPairs === images.length){
      msg.innerText = "ğŸ‰ You matched all pictures ğŸ’–";
      playAgainBtn.style.display = "inline-block";

      if(!bestScore || flips < bestScore){
        localStorage.setItem("bestScore", flips);
        bestEl.innerText = flips;
      }
    }
  } else {
    lock = true;
    setTimeout(() => {
      first.classList.remove("flipped");
      card.classList.remove("flipped");
      first = null;
      lock = false;
    }, 800);
  }
}

playAgainBtn.onclick = startGame;

function goBack(){
  music1.pause();
  music2.pause();
  window.location.href = "index.html";
}

startGame();
</script>

</body>
</html>
